{
  "phase": 1,
  "sprint": 3,
  "todoFile": 5,
  "title": "Annotation Toolbar & Persistence",
  "priority": "HIGH",
  "effort": "13 hours",
  "status": "completed",
  "milestone": "Closed Beta",
  "tasks": [
    {
      "id": "3.6.1",
      "category": "toolbar",
      "title": "Create Annotation Toolbar",
      "description": "Floating toolbar with annotation tool selection.",
      "status": "completed",
      "estimatedHours": 4,
      "agent": "sonnet",
      "files": [
        "src/components/toolbar/AnnotationToolbar.tsx"
      ],
      "testCategories": [
        "unit"
      ],
      "acceptanceCriteria": [
        "Tool buttons: Select, Highlight, Underline, Strikethrough, Note",
        "Color picker popover",
        "Opacity slider in popover",
        "Active tool highlighted",
        "Keyboard shortcuts work"
      ]
    },
    {
      "id": "3.6.2",
      "category": "toolbar",
      "title": "Implement Annotation Keyboard Shortcuts",
      "description": "Add keyboard shortcuts for annotation tools.",
      "status": "completed",
      "estimatedHours": 2,
      "agent": "haiku",
      "files": [
        "src/hooks/useAnnotationShortcuts.ts"
      ],
      "testCategories": [
        "unit"
      ],
      "acceptanceCriteria": [
        "H for Highlight",
        "U for Underline",
        "S for Strikethrough",
        "N for Note",
        "Escape to deselect tool"
      ]
    },
    {
      "id": "3.7.1",
      "category": "persistence",
      "title": "Implement Annotation Serialization",
      "description": "Serialize annotations to JSON for save/load.",
      "status": "completed",
      "estimatedHours": 4,
      "agent": "sonnet",
      "files": [
        "src/lib/annotations/serializer.ts"
      ],
      "testCategories": [
        "unit"
      ],
      "acceptanceCriteria": [
        "Annotations serialize to JSON",
        "JSON deserializes to annotations",
        "Handles all annotation types",
        "Preserves replies"
      ]
    },
    {
      "id": "3.7.2",
      "category": "persistence",
      "title": "Add Annotation Export/Import",
      "description": "Export and import annotations as JSON file.",
      "status": "completed",
      "estimatedHours": 3,
      "agent": "haiku",
      "files": [
        "src/components/annotations/ExportImportDialog.tsx"
      ],
      "testCategories": [
        "integration"
      ],
      "acceptanceCriteria": [
        "Export button downloads JSON",
        "Import button loads JSON",
        "Merge option for import",
        "Replace option for import"
      ]
    },
    {
      "id": "3.5.6",
      "category": "testing",
      "title": "Write Unit and Integration Tests",
      "description": "Create test files for Sprint 3 features including annotationStore tests, highlight/note annotation tests, text markup tests, and sticky note functionality.",
      "status": "completed",
      "estimatedHours": 4,
      "agent": "sonnet",
      "files": [
        "tests/unit/stores/annotationStore.test.ts",
        "tests/unit/components/annotations/HighlightTool.test.tsx",
        "tests/unit/components/annotations/StickyNote.test.tsx",
        "tests/unit/lib/annotations/serializer.test.ts",
        "tests/integration/annotations/highlights.test.tsx",
        "tests/integration/annotations/notes.test.tsx"
      ],
      "testCategories": [
        "unit",
        "integration"
      ],
      "acceptanceCriteria": [
        "All new features have unit tests",
        "Integration tests pass",
        "Code coverage meets target",
        "Annotation store actions tested",
        "Highlight creation/editing tested",
        "Sticky note functionality tested",
        "Text markup tools tested"
      ]
    }
  ],
  "successCriteria": [
    "Annotation toolbar provides easy tool access",
    "Keyboard shortcuts work",
    "Annotations persist when document is saved",
    "Export/import works"
  ],
  "filesCreated": [
    "src/components/toolbar/AnnotationToolbar.tsx",
    "src/hooks/useAnnotationShortcuts.ts",
    "src/lib/annotations/serializer.ts",
    "src/components/annotations/ExportImportDialog.tsx"
  ],
  "filesModified": [
    "src/components/layout/Toolbar.tsx"
  ],
  "totalNewTests": 13,
  "totalEstimatedHours": 17,
  "dependencies": [
    "PHASE_1_SPRINT_3_TODO_3",
    "PHASE_1_SPRINT_3_TODO_4"
  ],
  "notes": [
    "Consider PDF annotation standard format for future PDF embedding"
  ]
}
